<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
</head>





<body>
    <header class="jumbotron">
        <h1 class="display-3">Work Day Scheduler</h1>
        <p class="lead">A simple calendar app for scheduling your work day</p>

        <p id="currentDay" class="lead"></p>
    </header>


    <div class="container"></div>

    <script src="lib/moment/moment.min.js"></script>


    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script>
        //-- Timeblocks go here --//


        $(document).ready(function () {

            var currentHour = moment().format("H");
            console.log(currentHour)


            var retrieveWeekdayMoDay = (moment().format('dddd, MMMM Do/ h:mm:ss a'));
            $('#currentDay').text(retrieveWeekdayMoDay)


            let timeBlocks = ["9", "10", "11", "12", "13", "14", "15", "16", "17"]



            $.each(timeBlocks, function (index, value) {
                const rowEl = $('<div>').addClass("row time-block").attr('id', value)
                const timeSlot = $('<div>').addClass("col-md-1 list-group-item timeSlot").attr('data-time', value).text(value + ":00")
                const timeText = $('<textarea>').addClass("col-md-10 list-group-item note description").attr("data-input", "input-1").attr('data-time', value)
                const timeButton = $('<button>').addClass("col-md-1 btn btn-info saveBtn").attr("data-button", "btn-1").attr('data-time', value).html("<i class='far fa-save'></i>")




                if (value - currentHour < 0) {
                    timeText.addClass('past')
                } else if (value - currentHour === 0) {
                    timeText.addClass('present')
                } else if (value - currentHour > 0)
                    timeText.addClass('future')


                rowEl.append(timeSlot, timeText, timeButton)
                $('.container').append(rowEl)


                $('.saveBtn').on('click', function () {
                    var activity = $(this).siblings('.description').val()
                    var hour = $(this).parent().attr('id')
                    console.log(activity)
                    var localStorageValue = localStorage.setItem(hour, activity)
                    localStorage.setItem(hour, activity)
                });


            }
            )

            //Looking at the timeblock strings we set in the array above then saving the things we wrote into local storage into the class of description that we specified in the timeText var
            $("#9 .description").val(localStorage.getItem("9"));
            $("#10 .description").val(localStorage.getItem("10"));
            $("#11 .description").val(localStorage.getItem("11"));
            $("#12 .description").val(localStorage.getItem("12"));
            $("#13 .description").val(localStorage.getItem("13"));
            $("#14 .description").val(localStorage.getItem("14"));
            $("#15 .description").val(localStorage.getItem("15"));
            $("#16 .description").val(localStorage.getItem("16"));
            $("#17 .description").val(localStorage.getItem("17"));

        });



    </script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
</body>

</html>